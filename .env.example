# Server Configuration
PORT=3000
APP_URL=https://your-ngrok-url.ngrok-free.app

# Database (PostgreSQL)
DB_HOST=localhost
DB_PORT=5432
DB_USER=wajobs
DB_PASSWORD=your_password
DB_NAME=wajobs

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Scraping Configuration
MAX_PAGES_PER_SCRAPE=3
DEFAULT_SCRAPE_INTERVAL_MINUTES=30

# Cron Schedule (every 5 minutes)
SCRAPE_CHECK_CRON=*/5 * * * *

# WhatsApp Business API
WHATSAPP_ACCESS_TOKEN="your-whatsapp-access-token"
WHATSAPP_PHONE_NUMBER_ID="your-phone-number-id"
WHATSAPP_BUSINESS_ACCOUNT_ID="your-business-account-id"
WHATSAPP_VERSION="v23.0"
WHATSAPP_WEBHOOK_VERIFY_TOKEN="your-verify-token"
WHATSAPP_WEBHOOK_URL="https://your-ngrok-url.ngrok.io/webhook/whatsapp"

# Grok API (xAI) - Required for Langchain service
GROK_API_KEY="your-grok-api-key-here"

# ============================================
# FEATURE FLAGS - Conversation Systems
# ============================================

# Langchain + Grok (LLM with structured output)
# Format: Comma-separated phone numbers WITH country code and +
# Example: "+2250123456789,+2250987654321"
# Leave empty to disable
LANGCHAIN_CONVERSATION_USERS=""

# NLP.js (Intent classification with ML)
# Format: Comma-separated phone numbers WITH country code and +
# Example: "+2250111111111,+2250222222222"
# Leave empty to disable
NLP_CONVERSATION_USERS=""

# Note: Users not in any list will use XState (default state machine)

# ============================================
# PRIORITY ORDER (if a number is in multiple lists)
# ============================================
# 1. LANGCHAIN_CONVERSATION_USERS (highest priority)
# 2. NLP_CONVERSATION_USERS
# 3. XState (default for all other users)

# ============================================
# EXAMPLES
# ============================================

# Example 1: Production rollout
# LANGCHAIN_CONVERSATION_USERS="+2250123456789,+2250987654321"  # VIP users
# NLP_CONVERSATION_USERS="+2250111111111,+2250222222222"        # Beta users
# Rest of users → XState (default)

# Example 2: A/B Testing
# LANGCHAIN_CONVERSATION_USERS="+2250AAA,+2250BBB"  # Group A
# NLP_CONVERSATION_USERS="+2250CCC,+2250DDD"        # Group B
# Rest → XState (Group C - control group)

# Example 3: Development/Testing
# LANGCHAIN_CONVERSATION_USERS="+2250YOUR_TEST_NUMBER"
# NLP_CONVERSATION_USERS=""

# ============================================
# IMPORTANT NOTES
# ============================================
# 1. NO SPACES between phone numbers
# 2. ALWAYS include country code with +
# 3. Format must match exactly as WhatsApp sends it
# 4. Changes require worker restart
# 5. Check logs for: [FeatureFlag] Using X conversation handler
